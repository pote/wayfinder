#!/usr/bin/env ruby

require 'clap'
require 'yaml'
require File.expand_path("../lib/wayfinder", File.dirname(__FILE__))

$source_dir = 'source'
Clap.run ARGV,
  '-s'          => lambda { |param| $source_dir     = param  },
  '--source'    => lambda { |param| $source_dir     = param  }


def load_character
  source_data = {}
  %i(main modifiers skills).each do |source_file|
    source_data[source_file] = YAML.load_file(
      File.join($source_dir, "#{ source_file.to_s }.yml")
    )
  end

  Wayfinder::Character.new(source_data)
end

require 'irb'
require 'irb/completion'
IRB.start
